!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).geojson2svg=t()}}(function(){return(function(){function t(e,r,n){function o(s,u){if(!r[s]){if(!e[s]){var p="function"==typeof require&&require;if(!u&&p)return p(s,!0);if(i)return i(s,!0);var c=Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var a=r[s]={exports:{}};e[s][0].call(a.exports,function(t){return o(e[s][1][t]||t)},a,a.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}return t})()({1:[function(t,e,r){var n,o,i;n=["Point","LineString","Polygon"],o=["MultiPoint","MultiLineString","MultiPolygon"],i={explode:function t(e){return o.indexOf(e.type)>-1&&e.coordinates.map(function(t){var r={};return r.type=e.type.replace("Multi",""),r.coordinates=t,e.crs&&(r.crs=e.crs),r})},implode:function t(e){var r=e.every(function(t){return n.indexOf(t.type)>-1}),o=e[0].crs||0,i=e.every(function(t){return(t.crs||0)==o});if(!r||!i)return!1;var s={};return s.type="Multi"+e[0].type,s.coordinates=[],0!=o&&(s.crs=o),e.forEach(function(t){s.coordinates.push(t.coordinates)}),s}},void 0!==e&&e.exports?e.exports=i:window&&(window.multigeojson=i)},{}],2:[function(t,e,r){var n=t("multigeojson");function o(t,e,r,n){return t.map(function(t){return[(t[0]-r.x)/e,(r.y-t[1])/e]}).map(function(t){return n?t[0].toFixed(n)+","+t[1].toFixed(n):t[0]+","+t[1]}).join(" ")}function i(t,e){var r=t.split("/>")[0];for(var n in e)e[n]&&(r+=" "+n+'="'+e[n]+'"');return r+" />"}function s(t,e,r,n){var i=n&&n.r?n.r:1,s=!!(n&&n.hasOwnProperty("pointAsCircle"))&&n.pointAsCircle,u=o([t.coordinates],e,r,n.precision);return s?[u]:["M"+u+" m"+-i+",0 a"+i+","+i+" 0 1,1 "+2*i+",0 a"+i+","+i+" 0 1,1 "+-2*i+",0"]}function u(t,e,r,n){var i;return["M"+o(t.coordinates,e,r,n.precision)]}function p(t,e,r,n){i=o(t.coordinates[0],e,r,n.precision),t.coordinates.length>1&&(s=t.coordinates.slice(1,t.coordinates.length));var i,s,u="M"+i;if(s)for(var p=0;p<s.length;p++)u+=" M"+o(s[p],e,r,n.precision);return[u+="Z"]}e.exports={Point:s,MultiPoint:function t(e,r,o,i){var u=!!(i&&i.hasOwnProperty("explode"))&&i.explode,p=n.explode(e).map(function(t){return s(t,r,o,i)[0]});return u?p:[p.join(" ")]},LineString:u,MultiLineString:function t(e,r,o,i){var s=!!(i&&i.hasOwnProperty("explode"))&&i.explode,p=n.explode(e).map(function(t){return u(t,r,o,i)[0]});return s?p:[p.join(" ")]},Polygon:p,MultiPolygon:function t(e,r,o,i){var s=!!i.hasOwnProperty("explode")&&i.explode,u=n.explode(e).map(function(t){return p(t,r,o,i)[0]});return s?u:[u.join(" ").replace(/Z/g,"")+"Z"]}}},{multigeojson:1}],3:[function(t,e,r){e.exports=function(t,e){var r={};return Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.keys(e).forEach(function(t){r[t]=e[t]}),r}},{}],4:[function(t,e,r){var n=t("./extend.js"),o=t("./converter.js"),i=function(t){this.options=t||{},this.viewportSize=this.options.viewportSize||{width:256,height:256},this.mapExtent=this.options.mapExtent||{left:-20037508.342789244,right:20037508.342789244,bottom:-20037508.342789244,top:20037508.342789244},this.res=this.calResolution(this.mapExtent,this.viewportSize,this.options.fitTo)};function s(t,e){return e.split(".").reduce(function t(e,r,n,o){if(e.hasOwnProperty(r))return e[r];throw Error(o.slice(0,n+1).join(".")+" is not a valid property path")},t)}i.prototype.calResolution=function(t,e,r){var n=(t.right-t.left)/e.width,o=(t.top-t.bottom)/e.height;if(!r)return Math.max(n,o);if("width"===r.toLowerCase())return n;if("height"===r.toLowerCase())return o;throw Error('"fitTo" option should be "width" or "height" ')},i.prototype.convert=function(t,e){var r=n(this.options,e||{}),i=[];if("FeatureCollection"==t.type)for(var s=0;s<t.features.length;s++)i=i.concat(this.convertFeature(t.features[s],r));else if("Feature"==t.type)i=this.convertFeature(t,r);else if("GeometryCollection"==t.type)for(var s=0;s<t.geometries.length;s++)i=i.concat(this.convertGeometry(t.geometries[s],r));else{if(!o[t.type])return;i=this.convertGeometry(t,r)}return r.callback&&r.callback.call(this,i),i},i.prototype.convertFeature=function(t,e){if(t||t.geometry){var r=n(this.options,e||{});if(r.attributes&&r.attributes instanceof Array){var o=r.attributes;r.attributes=o.reduce(function(e,r){if("string"==typeof r){var n,o=r.split(".").pop();try{n=s(t,r)}catch(i){n=!1}n&&(e[o]=n)}else if("object"==typeof r&&r.type&&r.property){if("dynamic"===r.type){var n,o=r.key?r.key:r.property.split(".").pop();try{n=s(t,r.property)}catch(u){n=!1}n&&(e[o]=n)}else"static"===r.type&&r.value&&(e[r.property]=r.value)}return e},{})}else r.attributes=r.attributes||{};var i=r.attributes.id||t.id||(t.properties&&t.properties.id?t.properties.id:null);return i&&(r.attributes.id=i),this.convertGeometry(t.geometry,r)}},i.prototype.convertGeometry=function(t,e){if(o[t.type]){var r,i,s=n(this.options,e||{}),u=s.output||"svg",p=o[t.type].call(this,t,this.res,{x:this.mapExtent.left,y:this.mapExtent.top},s);return"svg"==u.toLowerCase()?i=(r=p.map(function(e){return function t(e,r,n,o){var i={},s=!!(o&&o.hasOwnProperty("pointAsCircle"))&&o.pointAsCircle;for(var u in("Point"==r||"MultiPoint"==r)&&s?(i.cx=e.split(",")[0],i.cy=e.split(",")[1],i.r=o&&o.r?o.r:"1"):(i={d:e},("Polygon"==r||"MultiPolygon"==r)&&i["fill-rule"]),n)i[u]=n[u];return i}(e,t.type,s.attributes,s)})).map(function(e){return function t(e,r,n){var o=!!(n&&n.hasOwnProperty("pointAsCircle"))&&n.pointAsCircle,i="<path";for(var s in("Point"==r||"MultiPoint"==r)&&o&&(i="<circle"),e)i+=" "+s+'="'+e[s]+'"';return i+"/>"}(e,t.type,s)}):p}},e.exports=i},{"./converter.js":2,"./extend.js":3}],5:[function(t,e,r){var n=t("./instance.js"),o=function(t){return new n(t)};e.exports=o},{"./instance.js":4}]},{},[5])(5)});